<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>JS-vezba-JSON</title>

<style>

</style>

</head>

<body>

	<p id="p-1" ></p>
	<p id="p-2" ></p>
	<p id="p-3" ></p>
	<p id="p-4" ></p>
	<p id="p-5" ></p>
	<p id="p-6" ></p>
	<p id="p-7" ></p>
	<p id="p-8" ></p>
	<p id="p-9" ></p>
	<p id="p-10" ></p>
	<p id="p-11" ></p>
	<p id="p-12" ></p>
	<p id="p-13" ></p>
	<p id="p-14" ></p>
	<p id="p-15" ></p>
	<p id="p-16" ></p>
	<p id="p-17" ></p>
	<p id="p-18" ></p>
	<p id="p-19" ></p>
	<p id="p-20" ></p>
	<p id="p-21" ></p>
	<p id="p-22" ></p>
	<p id="p-23" ></p>
	<p id="p-24" ></p>
	<p id="p-25" ></p>
	<p id="p-26" ></p>
	<p id="p-27" ></p>
	<p id="p-28" ></p>
	<p id="p-29" ></p>
	<p id="p-30" ></p>
	<p id="p-31" ></p>
	<p id="p-32" ></p>
	<p id="p-33" ></p>
	<p id="p-34" ></p>
	<p id="p-35" ></p>
	<p id="p-36" ></p>
	<p id="p-37" ></p>
	<p id="p-38" ></p>
	<p id="p-39" ></p>
	<p id="p-40" ></p>
	<p id="p-41" ></p>

	<script>
		var myJSON = '{"name":"John", "age":31, "city":"New York"}';
		document.getElementById('p-1').innerHTML = myJSON + " objekat u JSON formatu.";
		var myObj = JSON.parse(myJSON);
		document.getElementById('p-2').innerHTML = myObj.name + " " + myObj.age + " " + 
		 myObj.city + " JSON konvertovan u JS objekat.";
	
	</script>

	<script>// Storing and retrieving data
		// Storing data
		var myObj2 = { name: "Mark", age: 25, city: "Chichago" };
		myJSON2 = JSON.stringify(myObj2);
		localStorage.setItem("testJSON", myJSON2);
		// Retrieving data
		text = localStorage.getItem("testJSON");
		obj = JSON.parse(text);
		document.getElementById('p-3').innerHTML = obj.name + obj.age + obj.city;
		
	</script>

	<script>// Parse
		var x = '{"firstName":"John", "lastName":"Doe", "age":30, "city": "New York"}';
		var y = '{ "name":"John", "age":31, "pets":[ { "animal":"dog", "name":"Fido" }, { "animal":"cat", "name":"Felix" }, { "animal":"hamster", "name":"Lightning" } ] }';
		var z = '[ "Apple", "Banana", "Kiwi", "Orange", "Lemon", "Strawberry" ]';
		var obj2 = JSON.parse(x);
		var obj3 = JSON.parse(y);
		var obj4 = JSON.parse(z);
		document.getElementById("p-4").innerHTML = obj2.firstName + obj2.lastName;
		document.getElementById("p-5").innerHTML = obj3.name + obj3.age + 
		obj3.pets[0].animal + obj3.pets[0].name;
		document.getElementById("p-6").innerHTML = obj4[0] + obj4[1] + obj4[2];

		var q = '{ "name":"Alvin", "birth":"1986-12-14", "city":"New York" }';
		var obj5 = JSON.parse(q);
		obj5.birth = new Date(obj5.birth);
		document.getElementById("p-7").innerHTML = obj5.name + " " + obj5.birth;

		var obj6 = JSON.parse(q, function (key, value) {
			if (key == "birth") {
				return new Date(value);
			} else {
				return value;
			}
		});
		document.getElementById("p-8").innerHTML = obj6.name + " " + obj6.birth;

		var w = '{"firstName":"John", "lastName":"Doe", "fullName":"function() {return this.firstName + this.lastName;}"}';
		var obj7 = JSON.parse(w);
		obj7.fullName = eval("(" + obj7.fullName + ")");
		document.getElementById("p-9").innerHTML = obj7.fullName();

	</script>

	<script>// JSON.stringify()
		var e = { name: "Mark", age: 25, city: "Chichago" };
		var r = JSON.stringify(e);
		document.getElementById("p-10").innerHTML = r;

		var t = [ "John", "Peter", "Sally", "Jane" ];
		var u = JSON.stringify(t);
		document.getElementById("p-11").innerHTML = u;

		var i = { name: "John", today: new Date(), city : "New York" };
		var o = JSON.stringify(i);
		document.getElementById("p-12").innerHTML = o;

		var p = { name: "John", age: function () {return 30;}, city: "New York" };
		var a = JSON.stringify(p);
		document.getElementById("p-13").innerHTML = a + " izbaci funkciju!";

		var s = { name: "John", age: function () {return 30;}, city: "New York" };
		s.age = s.age.toString();
		var d = JSON.stringify(s);
		document.getElementById("p-14").innerHTML = d + " funkciju konvertujemo u string, pa onda stringify.";
	</script>

	<script>// JSON Objects
		var xx = {"firstName":"John", "lastName":"Doe", "age":30, "city": "New York"};
		document.getElementById("p-15").innerHTML = xx.firstName + xx.lastName;
		document.getElementById("p-16").innerHTML = xx["firstName"] + xx["lastName"];
		for (x in xx) {
			document.getElementById("p-17").innerHTML += x + " " + xx[x] + " ";
		}// x lupuje kroz property a xx[x] lupuje kroz value

		yy = {
  			"name":"John",
  			"age":30,
  			"cars": {
    			"car1":"Ford",
   				"car2":"BMW",
    			"car3":"Fiat"
  			}
 		};
 		document.getElementById("p-18").innerHTML = yy.name + yy.age;
 		document.getElementById("p-19").innerHTML = yy.name + " cars are: " + 
 		yy.cars.car1 + yy.cars.car2 + yy.cars.car3;
 		document.getElementById("p-20").innerHTML = yy["name"] + " cars are: " + 
 		yy.cars["car1"] + yy.cars["car2"] + yy.cars["car3"];

 		yy.cars.car3 = "Mercedes";
 		yy.cars["car2"] = "Audi";

 		document.getElementById("p-21").innerHTML = yy.cars.car3 + yy.cars["car2"];

 		delete yy.cars["car1"];
 		var zz = "";
 		for (i in yy.cars) {
 			zz += yy.cars[i] + " ";
 		}
 		document.getElementById("p-22").innerHTML = zz;
	</script>

	<script>// JSON Arrays
		var yyy = {
  			"name":"John",
  			"age":30,
  			"cars":[ "Ford", "BMW", "Fiat" ]
		};
		document.getElementById("p-23").innerHTML = yyy.name + yyy.age +
		yyy.cars[0] + yyy.cars[1] + yyy.cars[2];
		ff = "";
		for (i in yyy.cars) {
			ff += yyy.cars[i] + " ";
		}
		document.getElementById("p-24").innerHTML = ff;

		ttt = {
  			"name":"John",
  			"age":30,
  			"cars": [
    			{ "name":"Ford", "models":[ "Fiesta", "Focus", "Mustang" ] },
    			{ "name":"BMW", "models":[ "320", "X3", "X5" ] },
    			{ "name":"Fiat", "models":[ "500", "Panda" ] }
  			]			
 		};
 		document.getElementById("p-25").innerHTML = ttt.name + ttt.age + 
 		ttt.cars[0].name + ttt.cars[0].models[0];
 		document.getElementById("p-26").innerHTML = ttt.name + ttt.age + 
 		ttt.cars[1].name + ttt.cars[1].models[2];

 		aaa = "";
 		for (i in ttt.cars) {
 			aaa += "<h2>" + ttt.cars[i].name + "</h2>";
 			for (j in ttt.cars[i].models) {
 				aaa += ttt.cars[i].models[j] + "<br>";
 			}
 		}
 		document.getElementById("p-27").innerHTML = aaa;

 		ttt.cars[1].models[0] = "520";
 		document.getElementById("p-28").innerHTML = ttt.cars[1].models[0];
 		delete ttt.cars[1].models[0];
 		var rrr = "";

 		for (i in ttt.cars[1].models) {
 			rrr += ttt.cars[1].models[i];
 		}
 		document.getElementById("p-29").innerHTML = rrr;
	</script>

	<script>// Parse function
		var tttt = '{"name":"John", "age":"function() {return 30;}", "city":"New York"}';
		var ppp = JSON.parse(tttt);
		ppp.age = eval("(" + ppp.age + ")");
		document.getElementById("p-30").innerHTML = ppp.name + ", " + ppp.age();
	</script>

	<script>
		var clubs = [{ name: "Milan",
					   city: "Milano",
					   jersy: { prvi: "crveno-crni", drugi: "beli", treci: "crni"}}, 
					   "Juventus", "Inter", "Roma", "Napoli"];
		document.getElementById("p-31").innerHTML = clubs[0].name + clubs[0].city +
		clubs[0].jersy.prvi + clubs[1];
	</script>

	<script>// DOM replace element
		var paragraph = document.getElementById('p-32');
		var div = document.createElement("div");
		var h1 = document.createElement("h1");
		var node = document.createTextNode("DOM replace element");
		h1.appendChild(node);
		div.appendChild(h1);
		document.body.replaceChild(div, paragraph);
		// ili paragraph.parentNode.replaceChild(div, paragraph);

	</script>

</body>

</html>

